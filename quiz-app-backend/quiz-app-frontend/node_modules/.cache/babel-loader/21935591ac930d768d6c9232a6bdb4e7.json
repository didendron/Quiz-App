{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"C:/Users/Albert/eclipse-workspace/QuizApp/quiz-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd/es/notification/style\";import _notification from\"antd/es/notification\";import _classCallCheck from\"C:/Users/Albert/eclipse-workspace/QuizApp/quiz-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Albert/eclipse-workspace/QuizApp/quiz-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Albert/eclipse-workspace/QuizApp/quiz-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Albert/eclipse-workspace/QuizApp/quiz-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Albert/eclipse-workspace/QuizApp/quiz-app-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import Layout,{Content}from'antd/lib/layout/layout';import{Component}from'react';import{Route,Switch,withRouter}from'react-router-dom';import'./App.css';import'../common/AppHeader';import Signup from'../user/signup/Signup';import AppHeader from'../common/AppHeader';import Login from'../user/login/Login';import{getCurrentUser}from'../api/Api';import{ACCESS_TOKEN}from'../common/constants';import PrivateRoute from'../common/PrivateRoute';import NewQuiz from'../quiz/NewQuiz';import QuizList from'../quiz/QuizList';import Quiz from'../quiz/Quiz';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={currentUser:null,isAuthenticated:false};_this.handleLogin=_this.handleLogin.bind(_assertThisInitialized(_this));_this.handleLogout=_this.handleLogout.bind(_assertThisInitialized(_this));_this.loadCurrentUser=_this.loadCurrentUser.bind(_assertThisInitialized(_this));_notification.config({placement:'topRight',top:100,duration:4});return _this;}_createClass(App,[{key:\"handleLogin\",value:function handleLogin(){_notification.success({message:'Quiz App',description:\"Jesteś zalogowany.\"});this.loadCurrentUser();this.props.history.push(\"/\");}},{key:\"handleLogout\",value:function handleLogout(){localStorage.removeItem(ACCESS_TOKEN);this.setState({isAuthenticated:false,currentUser:null});this.props.history.push(\"/\");_notification.success({message:'Quiz App',description:\"Jesteś wylogowany.\"});}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadCurrentUser();}},{key:\"loadCurrentUser\",value:function loadCurrentUser(){var _this2=this;getCurrentUser().then(function(response){console.log(response.name);_this2.setState({currentUser:response.name,isAuthenticated:true});console.log(\"currentUser: \"+_this2.state.currentUser);}).catch(function(error){_this2.setState({isAuthenticated:false});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(Layout,{className:\"app-container\",children:[/*#__PURE__*/_jsx(AppHeader,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),/*#__PURE__*/_jsx(Content,{className:\"app-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(props){return/*#__PURE__*/_jsx(QuizList,_objectSpread({},props));}}),/*#__PURE__*/_jsx(Route,{path:\"/quiz\",render:function render(props){return/*#__PURE__*/_jsx(Quiz,_objectSpread({},props));}}),/*#__PURE__*/_jsx(Route,{path:\"/login\",render:function render(props){return/*#__PURE__*/_jsx(Login,_objectSpread({onLogin:_this3.handleLogin},props));}}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",component:Signup}),/*#__PURE__*/_jsx(PrivateRoute,{authenticated:this.state.isAuthenticated,path:\"/new\",component:NewQuiz,handleLogout:this.handleLogout})]})})})]});}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["C:/Users/Albert/eclipse-workspace/QuizApp/quiz-app-frontend/src/app/App.js"],"names":["Layout","Content","Component","Route","Switch","withRouter","Signup","AppHeader","Login","getCurrentUser","ACCESS_TOKEN","PrivateRoute","NewQuiz","QuizList","Quiz","App","props","state","currentUser","isAuthenticated","handleLogin","bind","handleLogout","loadCurrentUser","config","placement","top","duration","success","message","description","history","push","localStorage","removeItem","setState","then","response","console","log","name","catch","error"],"mappings":"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","sourcesContent":["import { notification } from 'antd';\nimport Layout, { Content } from 'antd/lib/layout/layout';\nimport { Component } from 'react';\nimport {  Route, Switch, withRouter } from 'react-router-dom';\nimport './App.css';\nimport '../common/AppHeader';\nimport Signup from '../user/signup/Signup';\nimport AppHeader from '../common/AppHeader';\nimport Login from '../user/login/Login';\nimport  {getCurrentUser}  from '../api/Api';\nimport { ACCESS_TOKEN } from '../common/constants';\nimport PrivateRoute from '../common/PrivateRoute';\nimport NewQuiz from '../quiz/NewQuiz';\nimport QuizList from '../quiz/QuizList';\nimport Quiz from '../quiz/Quiz';\n\nclass App extends Component{\n  constructor(props){\n    super(props);\n    this.state={\n      currentUser:null,\n      isAuthenticated:false,\n      \n   }\n\n    this.handleLogin = this.handleLogin.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n    this.loadCurrentUser = this.loadCurrentUser.bind(this);\n    \n\n    notification.config({\n      placement:'topRight',\n      top:100,\n      duration:4\n    })\n  }\n\n  handleLogin() {\n    notification.success({\n      message: 'Quiz App',\n      description: \"Jesteś zalogowany.\",\n    });\n    this.loadCurrentUser();\n    this.props.history.push(\"/\");\n  }\n\n  handleLogout() {\n    localStorage.removeItem(ACCESS_TOKEN)\n    this.setState({\n      isAuthenticated:false,\n      currentUser:null\n\n    })\n\n    this.props.history.push(\"/\");\n    notification.success({\n          message: 'Quiz App',\n          description: \"Jesteś wylogowany.\",\n    });\n\n  }\n\n\n  componentDidMount(){\n    this.loadCurrentUser();\n  }\n\n  loadCurrentUser() {\n    \n    getCurrentUser()\n    .then(response => {\n      console.log(response.name);\n      this.setState({\n        currentUser: response.name,\n        isAuthenticated: true,\n        \n      });\n      console.log(\"currentUser: \"+this.state.currentUser);\n    }).catch(error => {\n      this.setState({\n        isAuthenticated: false \n      });\n\n    });\n  }\n  \n\n\n  render(){\n    return(\n      <Layout className=\"app-container\">\n        <AppHeader isAuthenticated={this.state.isAuthenticated}\n        currentUser={this.state.currentUser}\n        onLogout={this.handleLogout}/>\n\n\n        <Content className=\"app-content\">\n          <div className=\"container\">\n            <Switch>\n            <Route exact path=\"/\" \n                  render={(props) => <QuizList  {...props} />}>\n            </Route>\n            <Route path=\"/quiz\" \n                  render={(props) => <Quiz  {...props} />}></Route>\n\n            <Route path=\"/login\" \n                  render={(props) => <Login onLogin={this.handleLogin} {...props} />}></Route>\n            <Route path=\"/signup\" component={Signup}></Route>\n            <PrivateRoute authenticated={this.state.isAuthenticated} path=\"/new\" component={NewQuiz} handleLogout={this.handleLogout}></PrivateRoute>\n              \n            </Switch>\n          </div>\n        </Content>\n\n      </Layout>\n\n\n    );\n  }\n\n}\n\nexport default withRouter(App);"]},"metadata":{},"sourceType":"module"}